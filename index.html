<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formul√°rio de Inscri√ß√£o ‚Äì Fazenda Serrinha</title>
    <link rel="stylesheet" href="style.css">
    <!-- jQuery CDN -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- jQuery Mask CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.16/jquery.mask.min.js"></script>
</head>
<body>
    <!-- Banner Header -->
    <div class="header-banner" style="background-image: url('https://res.cloudinary.com/ddjlqajrd/image/upload/v1757067076/background_1_nuo0n6.jpg');">
    </div>

    <!-- Container Principal -->
    <div class="container">
        <div class="form-card">
            <!-- Logo Container -->
            <div class="logo-container">
                <img src="https://assets.fazendaserrinha.com.br/logos/fs_logo_circular.png" alt="Logo Fazenda Serrinha" class="logo">
            </div>
            
            <!-- Tela 1: Boas-vindas -->
            <div class="form-content" id="step-1">
                <div class="welcome-section">
                    <h1 id="event-title">Carregando informa√ß√µes do evento...</h1>
                    <p id="event-description">Aguarde enquanto carregamos os detalhes do evento.</p>
                    <p id="event-observations" class="observations"></p>
                </div>

                <!-- Estado de Carregamento -->
                <div class="loading-state">
                    <div class="spinner"></div>
                    <p>Carregando dados do evento...</p>
                </div>

                <!-- Estado de Erro -->
                <div class="error-state" style="display: none;">
                    <div class="error-icon">‚ùå</div>
                    <h3>Ops! Algo deu errado</h3>
                    <p>N√£o foi poss√≠vel carregar os dados do evento. Verifique o link ou tente novamente.</p>
                    <div class="error-actions">
                        <button class="btn btn-primary" onclick="location.reload()">Tentar Novamente</button>
                    </div>
                </div>

                <!-- Bot√£o Avan√ßar -->
                <button class="btn btn-primary btn-advance" id="start-form-btn" style="display: none;">
                    Avan√ßar
                </button>
            </div>

            <!-- Tela 2: Dados dos Participantes (oculta inicialmente) -->
            <div class="form-content" id="step-2" style="display: none;">
                <h2 class="section-title">Dados dos Participantes</h2>
                
                <div id="participants-container">
                    <!-- Participantes ser√£o adicionados aqui via JavaScript -->
                </div>
                
                <button class="btn btn-secondary btn-add-participant" id="add-participant-btn">
                    ‚ûï Adicionar Participante
                </button>
                
                <div class="navigation-buttons">
                    <button class="btn btn-secondary back-btn">Voltar</button>
                    <button class="btn btn-primary next-btn">Pr√≥ximo</button>
                </div>
            </div>

            <!-- Tela 3: Resumo e Pagamento (oculta inicialmente) -->
            <div class="form-content" id="step-3" style="display: none;">
                <h2 class="section-title">Resumo e Pagamento</h2>
                
                <div id="summary-content">
                    <!-- Resumo ser√° preenchido via JavaScript -->
                </div>

                <div class="coupon-section">
                    <label for="coupon-code">Cupom de Desconto:</label>
                    <input type="text" id="coupon-code" class="form-control" placeholder=" ">
                    <p id="coupon-feedback" class="feedback-message"></p>
                </div>

                <div class="payment-method-section">
                    <label for="payment-method">Forma de Pagamento:</label>
                    <select id="payment-method" class="form-control">
                        <!-- Op√ß√µes carregadas via JavaScript -->
                    </select>
                </div>

                <div class="totals-summary">
                    <div class="total-line">
                        <span>Total Hospedagem:</span>
                        <span id="subtotal-hospedagem">R$ 0,00</span>
                    </div>
                    <div class="total-line">
                        <span>Total Evento:</span>
                        <span id="subtotal-evento">R$ 0,00</span>
                    </div>
                    <div class="total-line discount" id="discount-line" style="display: none;">
                        <span>Desconto Cupom:</span>
                        <span id="discount-value">-R$ 0,00</span>
                    </div>
                    <div class="total-line final">
                        <span>TOTAL:</span>
                        <span id="final-total">R$ 0,00</span>
                    </div>
                </div>

                <!-- NOVA SE√á√ÉO: Pol√≠tica de Confirma√ß√£o e Cancelamento -->
                <div class="responsible-payer-summary" id="cancellation-policy-section" style="display: none;">
                    <div class="policy-content"></div>
                </div>
                <!-- FIM DA NOVA SE√á√ÉO -->

                
                <div class="terms-section">
                    <label class="checkbox-container">
                        <input type="checkbox" id="terms-conditions" required>
                        <span class="checkmark"></span>
                        <span class="checkbox-text">Li e concordo com os <a href="#" id="terms-link">Termos e Condi√ß√µes</a></span>
                    </label>
                </div>

                <div class="navigation-buttons">
                    <button class="btn btn-secondary back-btn">Voltar</button>
                    <button class="btn btn-primary submit-btn">Enviar Inscri√ß√£o</button>
                </div>
            </div>

            <!-- Tela 4: Confirma√ß√£o (oculta inicialmente) -->
            <div class="form-content" id="step-4" style="display: none;">
                <div class="success-container">
                    <h2>INSCRI√á√ÉO CONFIRMADA!</h2>
                    
                    <div class="confirmation-card">
                        <p>Sua inscri√ß√£o na Fazenda Serrinha foi enviada com sucesso!</p>
                        
                        <div class="confirmation-details">
                            <div class="detail-item">
                                <span class="label">üìÑ ID da Inscri√ß√£o:</span>
                                <span class="value" id="confirmation-id">#FS2025000000</span>
                            </div>
                            <div class="detail-item">
                                <span class="label">üí∞ Valor Total:</span>
                                <span class="value" id="confirmation-total">R$ 0,00</span>
                            </div>
                            <div class="detail-item">
                                <span class="label">üí≥ Forma de Pagamento:</span>
                                <span class="value" id="confirmation-payment-method"></span>
                            </div>
                        </div>
                        
                        <p class="payment-instruction">üìß Clique no bot√£o abaixo para realizar o pagamento.</p>
                    </div>
                    
                    <button class="btn btn-primary payment-link-btn" style="display: none;">
                        Ir para Pagamento
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Template para Participantes -->
    <template id="participant-template">
        <div class="participant-block">
            <div class="participant-header">
                <h3>PARTICIPANTE <span class="participant-number">1</span></h3>
                <button class="btn btn-danger btn-remove-participant" style="display: none;">Remover</button>
            </div>
            
            <div class="participant-form">
                <div class="form-row">
                    <div class="form-group">
                        <label>Nome Completo:</label>
                        <input type="text" class="form-control full-name" required>
                    </div>
                </div>

                                <!-- Mover E-mail e Data de Nascimento para a pr√≥xima linha -->
                <div class="form-row">
                    <div class="form-group">
                        <label>Data Nasc.:</label>
                        <input type="date" class="form-control dob-input" required>
                    </div>
                    <!-- Deixar uma coluna vazia ou adicionar outro campo se necess√°rio -->
                    <div class="form-group">
                        <!-- Coluna vazia ou outro campo futuro -->
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                    <label>Telefone:</label>
                    <div class="phone-input-container">
                        <select class="form-control country-select">
                        <option value="+55" data-country="BR" selected>üáßüá∑ +55</option>
                        <option value="+1" data-country="US">üá∫üá∏ +1</option>
                        <option value="+1" data-country="CA">üá®üá¶ +1</option>
                        <option value="+54" data-country="AR">üá¶üá∑ +54</option>
                        <option value="+56" data-country="CL">üá®üá± +56</option>
                        <option value="+57" data-country="CO">üá®üá¥ +57</option>
                        <option value="+51" data-country="PE">üáµüá™ +51</option>
                        <option value="+598" data-country="UY">üá∫üáæ +598</option>
                        <option value="+595" data-country="PY">üáµüáæ +595</option>
                        <option value="+591" data-country="BO">üáßüá¥ +591</option>
                        <option value="+593" data-country="EC">üá™üá® +593</option>
                        <option value="+58" data-country="VE">üáªüá™ +58</option>
                        <option value="+351" data-country="PT">üáµüáπ +351</option>
                        <option value="+34" data-country="ES">üá™üá∏ +34</option>
                        <option value="+33" data-country="FR">üá´üá∑ +33</option>
                        <option value="+49" data-country="DE">üá©üá™ +49</option>
                        <option value="+39" data-country="IT">üáÆüáπ +39</option>
                        <option value="+44" data-country="GB">üá¨üáß +44</option>
                        </select>
                        <input type="text" class="form-control phone-input" required placeholder="Digite o telefone">
                        </div>
                    </div>
                <!-- QUARTA LINHA: CPF (ser√° oculto inicialmente) -->
                <div class="form-group">
                    <label>CPF:</label>
                    <input type="text" class="form-control cpf-mask" required>
                    <p class="feedback-message cpf-feedback"></p>
                </div>
            </div>

                <!-- NOVA LINHA: Adicionar campo de g√™nero -->
                <div class="form-row">
                    <div class="form-group">
                        <label>G√™nero:</label>
                        <select class="form-control gender-select" required>
                            <option value="">Selecione o g√™nero</option>
                            <option value="masculino">Masculino</option>
                            <option value="feminino">Feminino</option>
                            <option value="nao-binario">N√£o-bin√°rio</option>
                            <option value="prefiro-nao-informar">Prefiro n√£o informar</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>E-mail:</label>
                        <input type="email" class="form-control email-input" required>
                    </div>
                </div>

                <!-- NOVA SE√á√ÉO: Endere√ßo (vis√≠vel apenas para respons√°vel pelo pagamento) -->
                <div class="address-section" style="display: none;">
                    <div class="section-divider">
                        <h4>üìç ENDERE√áO PARA NOTA FISCAL</h4>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label>CEP:</label>
                            <div class="cep-input-container">
                                <input type="text" class="form-control cep-input" placeholder="00000-000">
                                <button type="button" class="btn btn-secondary btn-search-cep" title="Buscar CEP">
                                    üîç
                                </button>
                            </div>
                            <p class="feedback-message cep-feedback" style="display: none;"></p>
                        </div>
                        <div class="form-group">
                            <label>N√∫mero:</label>
                            <input type="text" class="form-control numero-input" placeholder="123">
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label>Logradouro:</label>
                            <input type="text" class="form-control logradouro-input" placeholder="Rua, Avenida, etc.">
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label>Complemento (opcional):</label>
                            <input type="text" class="form-control complemento-input" placeholder="Apto, Bloco, etc.">
                        </div>
                        <div class="form-group">
                            <label>Bairro:</label>
                            <input type="text" class="form-control bairro-input" placeholder="Nome do bairro">
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label>Cidade:</label>
                            <input type="text" class="form-control cidade-input" placeholder="Nome da cidade">
                        </div>
                        <div class="form-group">
                            <label>Estado:</label>
                            <select class="form-control estado-select">
                                <option value="">Selecione o estado</option>
                                <option value="AC">Acre</option>
                                <option value="AL">Alagoas</option>
                                <option value="AP">Amap√°</option>
                                <option value="AM">Amazonas</option>
                                <option value="BA">Bahia</option>
                                <option value="CE">Cear√°</option>
                                <option value="DF">Distrito Federal</option>
                                <option value="ES">Esp√≠rito Santo</option>
                                <option value="GO">Goi√°s</option>
                                <option value="MA">Maranh√£o</option>
                                <option value="MT">Mato Grosso</option>
                                <option value="MS">Mato Grosso do Sul</option>
                                <option value="MG">Minas Gerais</option>
                                <option value="PA">Par√°</option>
                                <option value="PB">Para√≠ba</option>
                                <option value="PR">Paran√°</option>
                                <option value="PE">Pernambuco</option>
                                <option value="PI">Piau√≠</option>
                                <option value="RJ">Rio de Janeiro</option>
                                <option value="RN">Rio Grande do Norte</option>
                                <option value="RS">Rio Grande do Sul</option>
                                <option value="RO">Rond√¥nia</option>
                                <option value="RR">Roraima</option>
                                <option value="SC">Santa Catarina</option>
                                <option value="SP">S√£o Paulo</option>
                                <option value="SE">Sergipe</option>
                                <option value="TO">Tocantins</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <!-- Se√ß√£o de Hospedagem -->
                <div class="lodging-section" style="display: none;">
                    <div class="section-divider">
                        <h4>üè† ESTADIA</h4>
                    </div>
                    
                    <div class="form-group">
                        <label>Per√≠odo:</label>
                        <select class="form-control stay-period-select"></select>
                        <p class="info-text stay-period-info" style="display: none;"></p>
                    </div>
                    
                    <div class="checkin-checkout-info">
                        <p class="checkin-info"><strong>Check-in:</strong> <span class="checkin-datetime"></span></p>
                        <p class="checkout-info"><strong>Check-out:</strong> <span class="checkout-datetime"></span></p>
                        <p class="primeira-refeicao-info" style="display: none;">
                        <strong>Primeira refei√ß√£o:</strong> <span class="primeira-refeicao-text"></span>
                        </p>
                        <p class="ultima-refeicao-info" style="display: none;">
                        <strong>√öltima refei√ß√£o:</strong> <span class="ultima-refeicao-text"></span>
                        </p>
                    </div>
                    
                    <div class="form-group">
                        <label>Acomoda√ß√£o:</label>
                        <select class="form-control accommodation-select"></select>
                        <p class="info-text accommodation-info" style="display: none;"></p>
                        <p class="info-text child-discount-info" style="display: none;">
                            O desconto para crian√ßas ser√° calculado e exibido na pr√≥xima tela.</p>
                    </div>

                    <div class="bed-preference-section" style="display: none;">
                        <div class="form-group">
                            <label>Prefer√™ncia de Cama:</label>
                            <select class="form-control bed-preference-select">
                                <option value="">Selecione a prefer√™ncia</option>
                                <option value="casal">Cama de Casal</option>
                                <option value="solteiro">Cama de Solteiro</option>
                            </select>
                            <p class="info-text bed-preference-info">Esta prefer√™ncia ser√° considerada conforme disponibilidade.</p>
                        </div>
                    </div>

                    <!-- NOVA SE√á√ÉO: Restri√ß√µes e Observa√ß√µes -->
                    <div class="restrictions-section">
                        <div class="form-group">
                            <label>Restri√ß√µes Alimentares e Observa√ß√µes (opcional):</label>
                            <textarea class="form-control restrictions-input" 
                                      rows="3" 
                                      placeholder="Ex: Alergia a amendoim, vegetariano, necessidades especiais, etc."></textarea>
                            <p class="info-text restrictions-info">Em caso de alimenta√ß√£o especial, a cozinha est√° aberta para autonomia do grupo e abra√ßar√° da melhor forma poss√≠vel. E, em casos muito espec√≠ficos, aconselhamos trazer seus pr√≥prios complementos</p>
                        </div>
                    </div>
                    
                <!-- CORRE√á√ÉO: Adicionar ID √∫nico e classes espec√≠ficas -->
                <div class="price-display lodging-price-display">
                    <span class="price-label">Hospedagem:</span>
                    <span class="price-value lodging-value" data-type="lodging">R$ 0,00</span>
                </div>
            </div>

                <!-- Se√ß√£o de Evento -->
                <div class="event-section" style="display: none;">
                    <div class="section-divider">
                        <h4>üéà EVENTO</h4>
                    </div>
                    
                    <div class="form-group">
                        <label>Participa√ß√£o:</label>
                        <select class="form-control event-option-select"></select>
                        <p class="info-text event-option-info" style="display: none;"></p>
                        <p class="info-text child-discount-info" style="display: none;">
                            O desconto para crian√ßas ser√° calculado e exibido na pr√≥xima tela.</p>
                    </div>
                    
                <!-- CORRE√á√ÉO: Adicionar ID √∫nico e classes espec√≠ficas -->
                <div class="price-display event-price-display">
                    <span class="price-label">Evento:</span>
                    <span class="price-value event-value" data-type="event">R$ 0,00</span>
                </div>
            </div>

                <!-- Respons√°vel pelo Pagamento -->
                <div class="responsible-payer-section" style="display: none;">
                    <label class="checkbox-container">
                        <input type="radio" class="responsible-payer" name="responsible-payer-radio">
                        <span class="checkmark"></span>
                        Respons√°vel pelo Pagamento
                    </label>
                </div>
                <!-- Respons√°vel pela Crian√ßa -->
                <div class="responsible-child-section" style="display: none;">
                    <label class="checkbox-container">
                        <input type="radio" class="responsible-child" name="responsible-child-radio">
                        <span class="checkmark"></span>
                        Respons√°vel pela Crian√ßa
                    </label>
                </div>
            </div>
        </div>
    </template>

    <!-- Indicador de Conectividade -->
    <div class="connectivity-indicator testing" id="connectivity-indicator" style="display: none;">
        <span class="webhook-status-icon"></span>
        <span class="connectivity-text">Testando conex√£o...</span>
    </div>

    <!-- Scripts na ordem correta -->
    <script src="js/cpfValidation.js"></script>
    <script src="js/priceCalculator.js"></script>
    <script src="js/webhookIntegration.js"></script>
    <script src="js/script.js"></script>
</body>
</html>
