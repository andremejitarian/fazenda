<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formul√°rio de Inscri√ß√£o ‚Äì Fazenda Serrinha</title>
    <link rel="stylesheet" href="style.css">
    <!-- jQuery CDN -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- jQuery Mask CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.16/jquery.mask.min.js"></script>
</head>
<body>
    <!-- Banner Header -->
    <div class="header-banner" style="background-image: url('https://res.cloudinary.com/ddjlqajrd/image/upload/v1757067076/background_1_nuo0n6.jpg');">
    </div>

    <!-- Container Principal -->
    <div class="container">
        <div class="form-card">
            <!-- Logo Container -->
            <div class="logo-container">
                <img src="https://assets.fazendaserrinha.com.br/logos/fs_logo_circular.png" alt="Logo Fazenda Serrinha" class="logo">
            </div>
            
            <!-- Tela 1: Boas-vindas -->
            <div class="form-content" id="step-1">
                <div class="welcome-section">
                    <h1 id="event-title">Carregando informa√ß√µes do evento...</h1>
                    <p id="event-description">Aguarde enquanto carregamos os detalhes do evento.</p>
                    <p id="event-observations" class="observations"></p>
                </div>

                <!-- Estado de Carregamento -->
                <div class="loading-state">
                    <div class="spinner"></div>
                    <p>Carregando dados do evento...</p>
                </div>

                <!-- Estado de Erro -->
                <div class="error-state" style="display: none;">
                    <div class="error-icon">‚ùå</div>
                    <h3>Ops! Algo deu errado</h3>
                    <p>N√£o foi poss√≠vel carregar os dados do evento. Verifique o link ou tente novamente.</p>
                    <div class="error-actions">
                        <button class="btn btn-primary" onclick="location.reload()">Tentar Novamente</button>
                    </div>
                </div>

                <!-- Bot√£o Avan√ßar -->
                <button class="btn btn-primary btn-advance" id="start-form-btn" style="display: none;">
                    Avan√ßar
                </button>
            </div>

            <!-- Tela 2: Dados dos Participantes (oculta inicialmente) -->
            <div class="form-content" id="step-2" style="display: none;">
                <h2 class="section-title">Dados dos Participantes</h2>
                
                <div id="participants-container">
                    <!-- Participantes ser√£o adicionados aqui via JavaScript -->
                </div>
                
                <button class="btn btn-secondary btn-add-participant" id="add-participant-btn">
                    ‚ûï Adicionar Participante
                </button>
                
                <div class="navigation-buttons">
                    <button class="btn btn-secondary back-btn">Voltar</button>
                    <button class="btn btn-primary next-btn">Pr√≥ximo</button>
                </div>
            </div>

            <!-- Tela 3: Resumo e Pagamento (oculta inicialmente) -->
            <div class="form-content" id="step-3" style="display: none;">
                <h2 class="section-title">Resumo e Pagamento</h2>
                
                <div id="summary-content">
                    <!-- Resumo ser√° preenchido via JavaScript -->
                </div>

                <div class="coupon-section">
                    <label for="coupon-code">Cupom de Desconto:</label>
                    <input type="text" id="coupon-code" class="form-control" placeholder=" ">
                    <p id="coupon-feedback" class="feedback-message"></p>
                </div>

                <div class="payment-method-section">
                    <label for="payment-method">Forma de Pagamento:</label>
                    <select id="payment-method" class="form-control">
                        <!-- Op√ß√µes carregadas via JavaScript -->
                    </select>
                    <p id="payment-method-description" class="help-text"></p>
                </div>

                <div class="totals-summary">
                    <div class="total-line">
                        <span>Total Hospedagem:</span>
                        <span id="subtotal-hospedagem">R$ 0,00</span>
                    </div>
                    <div class="total-line">
                        <span>Total Evento:</span>
                        <span id="subtotal-evento">R$ 0,00</span>
                    </div>
                    <div class="total-line discount">
                        <span>Desconto Cupom:</span>
                        <span id="discount-value">-R$ 0,00</span>
                    </div>
                    <div class="total-line final">
                        <span>TOTAL:</span>
                        <span id="final-total">R$ 0,00</span>
                    </div>
                </div>

                <div class="terms-section">
                    <label class="checkbox-container">
                        <input type="checkbox" id="terms-conditions" required>
                        <span class="checkmark"></span>
                        Li e concordo com os <a href="#" id="terms-link" >Termos e Condi√ß√µes</a>
                    </label>
                </div>

                <div class="navigation-buttons">
                    <button class="btn btn-secondary back-btn">Voltar</button>
                    <button class="btn btn-primary submit-btn">Enviar Inscri√ß√£o</button>
                </div>
            </div>

            <!-- Tela 4: Confirma√ß√£o (oculta inicialmente) -->
            <div class="form-content" id="step-4" style="display: none;">
                <div class="success-container">
                    <div class="success-icon">‚úÖ</div>
                    <h2>INSCRI√á√ÉO CONFIRMADA!</h2>
                    
                    <div class="confirmation-card">
                        <h3>üéâ SUCESSO!</h3>
                        <p>Sua inscri√ß√£o na Fazenda Serrinha foi enviada com sucesso!</p>
                        
                        <div class="confirmation-details">
                            <div class="detail-item">
                                <span class="label">üìÑ ID da Inscri√ß√£o:</span>
                                <span class="value" id="confirmation-id">#FS2025000000</span>
                            </div>
                            <div class="detail-item">
                                <span class="label">üí∞ Valor Total:</span>
                                <span class="value" id="confirmation-total">R$ 0,00</span>
                            </div>
                            <div class="detail-item">
                                <span class="label">üí≥ Forma de Pagamento:</span>
                                <span class="value" id="confirmation-payment-method"></span>
                            </div>
                        </div>
                        
                        <p class="payment-instruction">üìß Clique no bot√£o abaixo para realizar o pagamento.</p>
                    </div>
                    
                    <button class="btn btn-primary payment-link-btn" style="display: none;">
                        Ir para Pagamento
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Template para Participantes -->
    <template id="participant-template">
        <div class="participant-block">
            <div class="participant-header">
                <h3>PARTICIPANTE <span class="participant-number">1</span></h3>
                <button class="btn btn-danger btn-remove-participant" style="display: none;">Remover</button>
            </div>
            
            <div class="participant-form">
                <div class="form-row">
                    <div class="form-group">
                        <label>Nome Completo:</label>
                        <input type="text" class="form-control full-name" required>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label>Telefone:</label>
                        <input type="text" class="form-control phone-mask" required>
                    </div>
                    <div class="form-group">
                        <label>CPF:</label>
                        <input type="text" class="form-control cpf-mask" required>
                        <p class="feedback-message cpf-feedback"></p>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label>E-mail:</label>
                        <input type="email" class="form-control email-input" required>
                    </div>
                    <div class="form-group">
                        <label>Data Nasc.:</label>
                        <input type="date" class="form-control dob-input" required>
                    </div>
                </div>

                <!-- Se√ß√£o de Hospedagem -->
                <div class="lodging-section" style="display: none;">
                    <div class="section-divider">
                        <h4>üè† ESTADIA</h4>
                    </div>
                    
                    <div class="form-group">
                        <label>Per√≠odo:</label>
                        <select class="form-control stay-period-select"></select>
                        <p class="info-text stay-period-info" style="display: none;"></p>
                    </div>
                    
                    <div class="checkin-checkout-info">
                        <p class="checkin-info">Check-in: <span class="checkin-datetime"></span></p>
                        <p class="checkout-info">Check-out: <span class="checkout-datetime"></span></p>
                    </div>
                    
                    <div class="form-group">
                        <label>Acomoda√ß√£o:</label>
                        <select class="form-control accommodation-select"></select>
                        <p class="info-text accommodation-info" style="display: none;"></p>
                    </div>
                    
                    <div class="price-display">
                        <span class="price-label">Hospedagem:</span>
                        <span class="price-value lodging-value">R$ 0,00</span>
                    </div>
                </div>

                <!-- Se√ß√£o de Evento -->
                <div class="event-section" style="display: none;">
                    <div class="section-divider">
                        <h4>üéà EVENTO</h4>
                    </div>
                    
                    <div class="form-group">
                        <label>Participa√ß√£o:</label>
                        <select class="form-control event-option-select"></select>
                        <p class="info-text event-option-info" style="display: none;"></p>
                    </div>
                    
                    <div class="price-display">
                        <span class="price-label">Evento:</span>
                        <span class="price-value event-value">R$ 0,00</span>
                    </div>
                </div>

                <!-- Respons√°vel pelo Pagamento -->
                <div class="responsible-payer-section" style="display: none;">
                    <label class="checkbox-container">
                        <input type="radio" class="responsible-payer" name="responsible-payer-radio">
                        <span class="checkmark"></span>
                        Respons√°vel pelo Pagamento
                    </label>
                </div>
                <!-- Respons√°vel pela Crian√ßa -->
                <div class="responsible-child-section" style="display: none;">
                    <label class="checkbox-container">
                        <input type="radio" class="responsible-child" name="responsible-child-radio">
                        <span class="checkmark"></span>
                        Respons√°vel pela Crian√ßa
                    </label>
                </div>
            </div>
        </div>
    </template>

    <!-- Indicador de Conectividade -->
    <div class="connectivity-indicator testing" id="connectivity-indicator" style="display: none;">
        <span class="webhook-status-icon"></span>
        <span class="connectivity-text">Testando conex√£o...</span>
    </div>

    <!-- Scripts na ordem correta -->
    <script src="js/cpfValidation.js"></script>
    <script src="js/priceCalculator.js"></script>
    <script src="js/webhookIntegration.js"></script>
    <script src="js/script.js"></script>
</body>
</html>
