<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FormulÃ¡rio de InscriÃ§Ã£o â€“ Fazenda Serrinha</title>
    <link rel="stylesheet" href="style.css">
    <!-- jQuery CDN -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- jQuery Mask CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.16/jquery.mask.min.js"></script>
</head>
<body>
    <!-- Banner Header -->
    <div class="header-banner" style="background-image: url('https://res.cloudinary.com/ddjlqajrd/image/upload/v1757067076/background_1_nuo0n6.jpg');">
    </div>

    <!-- Container Principal -->
    <div class="container">
        <div class="form-card">
            <!-- Logo Container -->
            <div class="logo-container">
                <img src="https://assets.fazendaserrinha.com.br/logos/fs_logo_circular.png" alt="Logo Fazenda Serrinha" class="logo">
            </div>
            
            <!-- Tela 1: Boas-vindas -->
            <div class="form-content" id="step-1">
                <div class="welcome-section">
                    <h1 id="event-title">Carregando informaÃ§Ãµes do evento...</h1>
                    <p id="event-description">Aguarde enquanto carregamos os detalhes do evento.</p>
                    <p id="event-observations" class="observations"></p>
                </div>

                <!-- Estado de Carregamento -->
                <div class="loading-state">
                    <div class="spinner"></div>
                    <p>Carregando dados do evento...</p>
                </div>

                <!-- Estado de Erro -->
                <div class="error-state" style="display: none;">
                    <div class="error-icon">âŒ</div>
                    <h3>Ops! Algo deu errado</h3>
                    <p>NÃ£o foi possÃ­vel carregar os dados do evento. Verifique o link ou tente novamente.</p>
                    <div class="error-actions">
                        <button class="btn btn-primary" onclick="location.reload()">Tentar Novamente</button>
                    </div>
                </div>

                <!-- BotÃ£o AvanÃ§ar -->
                <button class="btn btn-primary btn-advance" id="start-form-btn" style="display: none;">
                    AvanÃ§ar
                </button>
            </div>

            <!-- Tela 2: Dados dos Participantes (oculta inicialmente) -->
            <div class="form-content" id="step-2" style="display: none;">
                <h2 class="section-title">Dados dos Participantes</h2>
                
                <div id="participants-container">
                    <!-- Participantes serÃ£o adicionados aqui via JavaScript -->
                </div>
                
                <button class="btn btn-secondary btn-add-participant" id="add-participant-btn">
                    â• Adicionar Participante
                </button>
                
                <div class="navigation-buttons">
                    <button class="btn btn-secondary back-btn">Voltar</button>
                    <button class="btn btn-primary next-btn">PrÃ³ximo</button>
                </div>
            </div>

            <!-- Tela 3: Resumo e Pagamento (oculta inicialmente) -->
            <div class="form-content" id="step-3" style="display: none;">
                <h2 class="section-title">Resumo e Pagamento</h2>
                
                <div id="summary-content">
                    <!-- Resumo serÃ¡ preenchido via JavaScript -->
                </div>

                <div class="coupon-section">
                    <label for="coupon-code">Cupom de Desconto:</label>
                    <input type="text" id="coupon-code" class="form-control" placeholder=" ">
                    <p id="coupon-feedback" class="feedback-message"></p>
                </div>

                <div class="payment-method-section">
                    <label for="payment-method">Forma de Pagamento:</label>
                    <select id="payment-method" class="form-control">
                        <!-- OpÃ§Ãµes carregadas via JavaScript -->
                    </select>
                </div>

                <div class="totals-summary">
                    <div class="total-line">
                        <span>Total Hospedagem:</span>
                        <span id="subtotal-hospedagem">R$ 0,00</span>
                    </div>
                    <div class="total-line">
                        <span>Total Evento:</span>
                        <span id="subtotal-evento">R$ 0,00</span>
                    </div>
                    <div class="total-line discount" id="discount-line" style="display: none;">
                        <span>Desconto Cupom:</span>
                        <span id="discount-value">-R$ 0,00</span>
                    </div>
                    <div class="total-line final">
                        <span>TOTAL:</span>
                        <span id="final-total">R$ 0,00</span>
                    </div>
                </div>

                <!-- NOVA SEÃ‡ÃƒO: PolÃ­tica de ConfirmaÃ§Ã£o e Cancelamento -->
                <div class="responsible-payer-summary" id="cancellation-policy-section" style="display: none;">
                    <div class="policy-content"></div>
                </div>
                <!-- FIM DA NOVA SEÃ‡ÃƒO -->

                
                <div class="terms-section">
                    <label class="checkbox-container">
                        <input type="checkbox" id="terms-conditions" required>
                        <span class="checkmark"></span>
                        <span class="checkbox-text">Li e concordo com os <a href="#" id="terms-link">Termos e CondiÃ§Ãµes</a></span>
                    </label>
                </div>

                <div class="navigation-buttons">
                    <button class="btn btn-secondary back-btn">Voltar</button>
                    <button class="btn btn-primary submit-btn">Enviar InscriÃ§Ã£o</button>
                </div>
            </div>

            <!-- Tela 4: ConfirmaÃ§Ã£o (oculta inicialmente) -->
            <div class="form-content" id="step-4" style="display: none;">
                <div class="success-container">
                    <h2>INSCRIÃ‡ÃƒO CONFIRMADA!</h2>
                    
                    <div class="confirmation-card">
                        <p>Sua inscriÃ§Ã£o na Fazenda Serrinha foi enviada com sucesso!</p>
                        
                        <div class="confirmation-details">
                            <div class="detail-item">
                                <span class="label">ğŸ“„ ID da InscriÃ§Ã£o:</span>
                                <span class="value" id="confirmation-id">#FS2025000000</span>
                            </div>
                            <div class="detail-item">
                                <span class="label">ğŸ’° Valor Total:</span>
                                <span class="value" id="confirmation-total">R$ 0,00</span>
                            </div>
                            <div class="detail-item">
                                <span class="label">ğŸ’³ Forma de Pagamento:</span>
                                <span class="value" id="confirmation-payment-method"></span>
                            </div>
                        </div>
                        
                        <p class="payment-instruction">ğŸ“§ Clique no botÃ£o abaixo para realizar o pagamento.</p>
                    </div>
                    
                    <button class="btn btn-primary payment-link-btn" style="display: none;">
                        Ir para Pagamento
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Template para Participantes -->
    <template id="participant-template">
        <div class="participant-block">
            <div class="participant-header">
                <h3>PARTICIPANTE <span class="participant-number">1</span></h3>
                <button class="btn btn-danger btn-remove-participant" style="display: none;">Remover</button>
            </div>
            
            <div class="participant-form">
                <div class="form-row">
                    <div class="form-group">
                        <label>Nome Completo:</label>
                        <input type="text" class="form-control full-name" required>
                    </div>
                </div>

                                <!-- Mover E-mail e Data de Nascimento para a prÃ³xima linha -->
                <div class="form-row">
                    <div class="form-group">
                        <label>Data Nasc.:</label>
                        <input type="date" class="form-control dob-input" required>
                    </div>
                    <!-- Deixar uma coluna vazia ou adicionar outro campo se necessÃ¡rio -->
                    <div class="form-group">
                        <!-- Coluna vazia ou outro campo futuro -->
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                    <label>Telefone:</label>
                    <div class="phone-input-container">
                        <select class="form-control country-select">
                        <option value="+55" data-country="BR" selected>ğŸ‡§ğŸ‡· +55</option>
                        <option value="+1" data-country="US">ğŸ‡ºğŸ‡¸ +1</option>
                        <option value="+1" data-country="CA">ğŸ‡¨ğŸ‡¦ +1</option>
                        <option value="+54" data-country="AR">ğŸ‡¦ğŸ‡· +54</option>
                        <option value="+56" data-country="CL">ğŸ‡¨ğŸ‡± +56</option>
                        <option value="+57" data-country="CO">ğŸ‡¨ğŸ‡´ +57</option>
                        <option value="+51" data-country="PE">ğŸ‡µğŸ‡ª +51</option>
                        <option value="+598" data-country="UY">ğŸ‡ºğŸ‡¾ +598</option>
                        <option value="+595" data-country="PY">ğŸ‡µğŸ‡¾ +595</option>
                        <option value="+591" data-country="BO">ğŸ‡§ğŸ‡´ +591</option>
                        <option value="+593" data-country="EC">ğŸ‡ªğŸ‡¨ +593</option>
                        <option value="+58" data-country="VE">ğŸ‡»ğŸ‡ª +58</option>
                        <option value="+351" data-country="PT">ğŸ‡µğŸ‡¹ +351</option>
                        <option value="+34" data-country="ES">ğŸ‡ªğŸ‡¸ +34</option>
                        <option value="+33" data-country="FR">ğŸ‡«ğŸ‡· +33</option>
                        <option value="+49" data-country="DE">ğŸ‡©ğŸ‡ª +49</option>
                        <option value="+39" data-country="IT">ğŸ‡®ğŸ‡¹ +39</option>
                        <option value="+44" data-country="GB">ğŸ‡¬ğŸ‡§ +44</option>
                        </select>
                        <input type="text" class="form-control phone-input" required placeholder="Digite o telefone">
                        </div>
                    </div>
                <!-- QUARTA LINHA: CPF (serÃ¡ oculto inicialmente) -->
                <div class="form-group">
                    <label>CPF:</label>
                    <input type="text" class="form-control cpf-mask" required>
                    <p class="feedback-message cpf-feedback"></p>
                </div>
            </div>

                <!-- NOVA LINHA: Adicionar campo de gÃªnero -->
                <div class="form-row">
                    <div class="form-group">
                        <label>GÃªnero:</label>
                        <select class="form-control gender-select" required>
                            <option value="">Selecione o gÃªnero</option>
                            <option value="masculino">Masculino</option>
                            <option value="feminino">Feminino</option>
                            <option value="nao-binario">NÃ£o-binÃ¡rio</option>
                            <option value="prefiro-nao-informar">Prefiro nÃ£o informar</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>E-mail:</label>
                        <input type="email" class="form-control email-input" required>
                    </div>
                </div>

                <!-- SeÃ§Ã£o de Hospedagem -->
                <div class="lodging-section" style="display: none;">
                    <div class="section-divider">
                        <h4>ğŸ  ESTADIA</h4>
                    </div>
                    
                    <div class="form-group">
                        <label>PerÃ­odo:</label>
                        <select class="form-control stay-period-select"></select>
                        <p class="info-text stay-period-info" style="display: none;"></p>
                    </div>
                    
                    <div class="checkin-checkout-info">
                        <p class="checkin-info"><strong>Check-in:</strong> <span class="checkin-datetime"></span></p>
                        <p class="checkout-info"><strong>Check-out:</strong> <span class="checkout-datetime"></span></p>
                        <p class="primeira-refeicao-info" style="display: none;">
                        <strong>Primeira refeiÃ§Ã£o:</strong> <span class="primeira-refeicao-text"></span>
                        </p>
                        <p class="ultima-refeicao-info" style="display: none;">
                        <strong>Ãšltima refeiÃ§Ã£o:</strong> <span class="ultima-refeicao-text"></span>
                        </p>
                    </div>
                    
                    <div class="form-group">
                        <label>AcomodaÃ§Ã£o:</label>
                        <select class="form-control accommodation-select"></select>
                        <p class="info-text accommodation-info" style="display: none;"></p>
                        <p class="info-text child-discount-info" style="display: none;">
                            O desconto para crianÃ§as serÃ¡ aplicado e exibido na prÃ³xima tela.</p>
                    </div>

                    <div class="bed-preference-section" style="display: none;">
                        <div class="form-group">
                            <label>PreferÃªncia de Cama:</label>
                            <select class="form-control bed-preference-select">
                                <option value="">Selecione a preferÃªncia</option>
                                <option value="casal">Cama de Casal</option>
                                <option value="solteiro">Cama de Solteiro</option>
                            </select>
                            <p class="info-text bed-preference-info">Esta preferÃªncia serÃ¡ considerada conforme disponibilidade.</p>
                        </div>
                    </div>

                    <!-- NOVA SEÃ‡ÃƒO: RestriÃ§Ãµes e ObservaÃ§Ãµes -->
                    <div class="restrictions-section">
                        <div class="form-group">
                            <label>RestriÃ§Ãµes Alimentares e ObservaÃ§Ãµes (opcional):</label>
                            <textarea class="form-control restrictions-input" 
                                      rows="3" 
                                      placeholder="Ex: Alergia a amendoim, vegetariano, necessidades especiais, etc."></textarea>
                            <p class="info-text restrictions-info">Em caso de alimentaÃ§Ã£o especial, a cozinha estÃ¡ aberta para autonomia do grupo e abraÃ§arÃ¡ da melhor forma possÃ­vel. E, em casos muito especÃ­ficos, aconselhamos trazer seus prÃ³prios complementos</p>
                        </div>
                    </div>
                    
                <!-- CORREÃ‡ÃƒO: Adicionar ID Ãºnico e classes especÃ­ficas -->
                <div class="price-display lodging-price-display">
                    <span class="price-label">Hospedagem:</span>
                    <span class="price-value lodging-value" data-type="lodging">R$ 0,00</span>
                </div>
            </div>

                <!-- SeÃ§Ã£o de Evento -->
                <div class="event-section" style="display: none;">
                    <div class="section-divider">
                        <h4>ğŸˆ EVENTO</h4>
                    </div>
                    
                    <div class="form-group">
                        <label>ParticipaÃ§Ã£o:</label>
                        <select class="form-control event-option-select"></select>
                        <p class="info-text event-option-info" style="display: none;"></p>
                    </div>
                    
                <!-- CORREÃ‡ÃƒO: Adicionar ID Ãºnico e classes especÃ­ficas -->
                <div class="price-display event-price-display">
                    <span class="price-label">Evento:</span>
                    <span class="price-value event-value" data-type="event">R$ 0,00</span>
                </div>
            </div>

                <!-- ResponsÃ¡vel pelo Pagamento -->
                <div class="responsible-payer-section" style="display: none;">
                    <label class="checkbox-container">
                        <input type="radio" class="responsible-payer" name="responsible-payer-radio">
                        <span class="checkmark"></span>
                        ResponsÃ¡vel pelo Pagamento
                    </label>
                </div>
                <!-- ResponsÃ¡vel pela CrianÃ§a -->
                <div class="responsible-child-section" style="display: none;">
                    <label class="checkbox-container">
                        <input type="radio" class="responsible-child" name="responsible-child-radio">
                        <span class="checkmark"></span>
                        ResponsÃ¡vel pela CrianÃ§a
                    </label>
                </div>
            </div>
        </div>
    </template>

    <!-- Indicador de Conectividade -->
    <div class="connectivity-indicator testing" id="connectivity-indicator" style="display: none;">
        <span class="webhook-status-icon"></span>
        <span class="connectivity-text">Testando conexÃ£o...</span>
    </div>

    <!-- Scripts na ordem correta -->
    <script src="js/cpfValidation.js"></script>
    <script src="js/priceCalculator.js"></script>
    <script src="js/webhookIntegration.js"></script>
    <script src="js/script.js"></script>
</body>
</html>
